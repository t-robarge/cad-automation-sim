package rules

import com.example.plm.domain.Feature;
import com.example.plm.domain.Part;
import com.example.plm.domain.Annotation;
import com.example.plm.domain.enums.ViewType;

// Label hole centers and create callouts
rule "Hole callout label"
when
  $f : Feature(type == "HOLE")
  $p : Part(this == $f.part)
then
  Annotation a = new Annotation();
  a.setPart($p);
  a.setLabel("HOLE");
  a.setValue(String.format("Ã˜%.1f", $f.getD1()));
  a.setX($f.getX());
  a.setY($f.getY());
  a.setViewType(ViewType.TOP);
  insert(a);
end

// Label edges longer than threshold
rule "Long edge label"
when
  $f : Feature(type == "EDGE", d1 > 50)
  $p : Part(this == $f.part)
then
  Annotation a = new Annotation();
  a.setPart($p);
  a.setLabel("EDGE-LONG");
  a.setValue(String.format("%.1f", $f.getD1()));
  a.setX($f.getX());
  a.setY($f.getY());
  a.setViewType(ViewType.FRONT);
  insert(a);
end
